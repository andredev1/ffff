{"ast":null,"code":"import { Indicator, IndicatorInput } from '../indicator/indicator';\n/**\n * Created by AAravindan on 5/8/16.\n */\n\nexport class PDMInput extends IndicatorInput {}\n;\nexport class PDM extends Indicator {\n  constructor(input) {\n    super(input);\n    var lows = input.low;\n    var highs = input.high;\n    var format = this.format;\n\n    if (lows.length != highs.length) {\n      throw 'Inputs(low,high) not of equal size';\n    }\n\n    this.result = [];\n\n    this.generator = function* () {\n      var plusDm;\n      var current = yield;\n      var last;\n\n      while (true) {\n        if (last) {\n          let upMove = current.high - last.high;\n          let downMove = last.low - current.low;\n          plusDm = format(upMove > downMove && upMove > 0 ? upMove : 0);\n        }\n\n        last = current;\n        current = yield plusDm;\n      }\n    }();\n\n    this.generator.next();\n    lows.forEach((tick, index) => {\n      var result = this.generator.next({\n        high: highs[index],\n        low: lows[index]\n      });\n      if (result.value !== undefined) this.result.push(result.value);\n    });\n  }\n\n  static calculate(input) {\n    Indicator.reverseInputs(input);\n    var result = new PDM(input).result;\n\n    if (input.reversedInput) {\n      result.reverse();\n    }\n\n    Indicator.reverseInputs(input);\n    return result;\n  }\n\n  nextValue(price) {\n    return this.generator.next(price).value;\n  }\n\n}","map":{"version":3,"sources":["/home/andre/Documents/ffff/node_modules/technicalindicators/lib/directionalmovement/PlusDM.js"],"names":["Indicator","IndicatorInput","PDMInput","PDM","constructor","input","lows","low","highs","high","format","length","result","generator","plusDm","current","last","upMove","downMove","next","forEach","tick","index","value","undefined","push","calculate","reverseInputs","reversedInput","reverse","nextValue","price"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,cAApB,QAA0C,wBAA1C;AACA;AACA;AACA;;AACA,OAAO,MAAMC,QAAN,SAAuBD,cAAvB,CAAsC;AAE7C;AACA,OAAO,MAAME,GAAN,SAAkBH,SAAlB,CAA4B;AAC/BI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,QAAIC,IAAI,GAAGD,KAAK,CAACE,GAAjB;AACA,QAAIC,KAAK,GAAGH,KAAK,CAACI,IAAlB;AACA,QAAIC,MAAM,GAAG,KAAKA,MAAlB;;AACA,QAAIJ,IAAI,CAACK,MAAL,IAAeH,KAAK,CAACG,MAAzB,EAAiC;AAC7B,YAAO,oCAAP;AACH;;AACD,SAAKC,MAAL,GAAc,EAAd;;AACA,SAAKC,SAAL,GAAkB,aAAa;AAC3B,UAAIC,MAAJ;AACA,UAAIC,OAAO,GAAG,KAAd;AACA,UAAIC,IAAJ;;AACA,aAAO,IAAP,EAAa;AACT,YAAIA,IAAJ,EAAU;AACN,cAAIC,MAAM,GAAIF,OAAO,CAACN,IAAR,GAAeO,IAAI,CAACP,IAAlC;AACA,cAAIS,QAAQ,GAAIF,IAAI,CAACT,GAAL,GAAWQ,OAAO,CAACR,GAAnC;AACAO,UAAAA,MAAM,GAAGJ,MAAM,CAAEO,MAAM,GAAGC,QAAT,IAAqBD,MAAM,GAAG,CAA/B,GAAoCA,MAApC,GAA6C,CAA9C,CAAf;AACH;;AACDD,QAAAA,IAAI,GAAGD,OAAP;AACAA,QAAAA,OAAO,GAAG,MAAMD,MAAhB;AACH;AACJ,KAbgB,EAAjB;;AAcA,SAAKD,SAAL,CAAeM,IAAf;AACAb,IAAAA,IAAI,CAACc,OAAL,CAAa,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC1B,UAAIV,MAAM,GAAG,KAAKC,SAAL,CAAeM,IAAf,CAAoB;AAC7BV,QAAAA,IAAI,EAAED,KAAK,CAACc,KAAD,CADkB;AAE7Bf,QAAAA,GAAG,EAAED,IAAI,CAACgB,KAAD;AAFoB,OAApB,CAAb;AAIA,UAAIV,MAAM,CAACW,KAAP,KAAiBC,SAArB,EACI,KAAKZ,MAAL,CAAYa,IAAZ,CAAiBb,MAAM,CAACW,KAAxB;AACP,KAPD;AAQH;;AAEe,SAATG,SAAS,CAACrB,KAAD,EAAQ;AACpBL,IAAAA,SAAS,CAAC2B,aAAV,CAAwBtB,KAAxB;AACA,QAAIO,MAAM,GAAG,IAAIT,GAAJ,CAAQE,KAAR,EAAeO,MAA5B;;AACA,QAAIP,KAAK,CAACuB,aAAV,EAAyB;AACrBhB,MAAAA,MAAM,CAACiB,OAAP;AACH;;AACD7B,IAAAA,SAAS,CAAC2B,aAAV,CAAwBtB,KAAxB;AACA,WAAOO,MAAP;AACH;;AAEDkB,EAAAA,SAAS,CAACC,KAAD,EAAQ;AACb,WAAO,KAAKlB,SAAL,CAAeM,IAAf,CAAoBY,KAApB,EAA2BR,KAAlC;AACH;;AA/C8B","sourcesContent":["import { Indicator, IndicatorInput } from '../indicator/indicator';\n/**\n * Created by AAravindan on 5/8/16.\n */\nexport class PDMInput extends IndicatorInput {\n}\n;\nexport class PDM extends Indicator {\n    constructor(input) {\n        super(input);\n        var lows = input.low;\n        var highs = input.high;\n        var format = this.format;\n        if (lows.length != highs.length) {\n            throw ('Inputs(low,high) not of equal size');\n        }\n        this.result = [];\n        this.generator = (function* () {\n            var plusDm;\n            var current = yield;\n            var last;\n            while (true) {\n                if (last) {\n                    let upMove = (current.high - last.high);\n                    let downMove = (last.low - current.low);\n                    plusDm = format((upMove > downMove && upMove > 0) ? upMove : 0);\n                }\n                last = current;\n                current = yield plusDm;\n            }\n        })();\n        this.generator.next();\n        lows.forEach((tick, index) => {\n            var result = this.generator.next({\n                high: highs[index],\n                low: lows[index]\n            });\n            if (result.value !== undefined)\n                this.result.push(result.value);\n        });\n    }\n    ;\n    static calculate(input) {\n        Indicator.reverseInputs(input);\n        var result = new PDM(input).result;\n        if (input.reversedInput) {\n            result.reverse();\n        }\n        Indicator.reverseInputs(input);\n        return result;\n    }\n    ;\n    nextValue(price) {\n        return this.generator.next(price).value;\n    }\n    ;\n}\n"]},"metadata":{},"sourceType":"module"}