{"ast":null,"code":"\"use strict\";\n\nimport { Indicator } from '../indicator/indicator';\nimport { LinkedList } from '../Utils/LinkedList';\nexport class WMA extends Indicator {\n  constructor(input) {\n    super(input);\n    var period = input.period;\n    var priceArray = input.values;\n    this.result = [];\n\n    this.generator = function* () {\n      let data = new LinkedList();\n      let denominator = period * (period + 1) / 2;\n\n      while (true) {\n        if (data.length < period) {\n          data.push(yield);\n        } else {\n          data.resetCursor();\n          let result = 0;\n\n          for (let i = 1; i <= period; i++) {\n            result = result + data.next() * i / denominator;\n          }\n\n          var next = yield result;\n          data.shift();\n          data.push(next);\n        }\n      }\n    }();\n\n    this.generator.next();\n    priceArray.forEach((tick, index) => {\n      var result = this.generator.next(tick);\n\n      if (result.value != undefined) {\n        this.result.push(this.format(result.value));\n      }\n    });\n  } //STEP 5. REMOVE GET RESULT FUNCTION\n\n\n  nextValue(price) {\n    var result = this.generator.next(price).value;\n    if (result != undefined) return this.format(result);\n  }\n\n}\nWMA.calculate = wma;\n;\nexport function wma(input) {\n  Indicator.reverseInputs(input);\n  var result = new WMA(input).result;\n\n  if (input.reversedInput) {\n    result.reverse();\n  }\n\n  Indicator.reverseInputs(input);\n  return result;\n}","map":{"version":3,"sources":["/home/andre/Downloads/ffff-main/node_modules/technicalindicators/lib/moving_averages/WMA.js"],"names":["Indicator","LinkedList","WMA","constructor","input","period","priceArray","values","result","generator","data","denominator","length","push","resetCursor","i","next","shift","forEach","tick","index","value","undefined","format","nextValue","price","calculate","wma","reverseInputs","reversedInput","reverse"],"mappings":"AAAA;;AACA,SAASA,SAAT,QAA0B,wBAA1B;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAO,MAAMC,GAAN,SAAkBF,SAAlB,CAA4B;AAC/BG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,QAAIC,MAAM,GAAGD,KAAK,CAACC,MAAnB;AACA,QAAIC,UAAU,GAAGF,KAAK,CAACG,MAAvB;AACA,SAAKC,MAAL,GAAc,EAAd;;AACA,SAAKC,SAAL,GAAkB,aAAa;AAC3B,UAAIC,IAAI,GAAG,IAAIT,UAAJ,EAAX;AACA,UAAIU,WAAW,GAAGN,MAAM,IAAIA,MAAM,GAAG,CAAb,CAAN,GAAwB,CAA1C;;AACA,aAAO,IAAP,EAAa;AACT,YAAKK,IAAI,CAACE,MAAN,GAAgBP,MAApB,EAA4B;AACxBK,UAAAA,IAAI,CAACG,IAAL,CAAU,KAAV;AACH,SAFD,MAGK;AACDH,UAAAA,IAAI,CAACI,WAAL;AACA,cAAIN,MAAM,GAAG,CAAb;;AACA,eAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIV,MAArB,EAA6BU,CAAC,EAA9B,EAAkC;AAC9BP,YAAAA,MAAM,GAAGA,MAAM,GAAIE,IAAI,CAACM,IAAL,KAAcD,CAAd,GAAmBJ,WAAtC;AACH;;AACD,cAAIK,IAAI,GAAG,MAAMR,MAAjB;AACAE,UAAAA,IAAI,CAACO,KAAL;AACAP,UAAAA,IAAI,CAACG,IAAL,CAAUG,IAAV;AACH;AACJ;AACJ,KAlBgB,EAAjB;;AAmBA,SAAKP,SAAL,CAAeO,IAAf;AACAV,IAAAA,UAAU,CAACY,OAAX,CAAmB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAChC,UAAIZ,MAAM,GAAG,KAAKC,SAAL,CAAeO,IAAf,CAAoBG,IAApB,CAAb;;AACA,UAAIX,MAAM,CAACa,KAAP,IAAgBC,SAApB,EAA+B;AAC3B,aAAKd,MAAL,CAAYK,IAAZ,CAAiB,KAAKU,MAAL,CAAYf,MAAM,CAACa,KAAnB,CAAjB;AACH;AACJ,KALD;AAMH,GAhC8B,CAiC/B;;;AACAG,EAAAA,SAAS,CAACC,KAAD,EAAQ;AACb,QAAIjB,MAAM,GAAG,KAAKC,SAAL,CAAeO,IAAf,CAAoBS,KAApB,EAA2BJ,KAAxC;AACA,QAAIb,MAAM,IAAIc,SAAd,EACI,OAAO,KAAKC,MAAL,CAAYf,MAAZ,CAAP;AACP;;AAtC8B;AAyCnCN,GAAG,CAACwB,SAAJ,GAAgBC,GAAhB;AACA;AACA,OAAO,SAASA,GAAT,CAAavB,KAAb,EAAoB;AACvBJ,EAAAA,SAAS,CAAC4B,aAAV,CAAwBxB,KAAxB;AACA,MAAII,MAAM,GAAG,IAAIN,GAAJ,CAAQE,KAAR,EAAeI,MAA5B;;AACA,MAAIJ,KAAK,CAACyB,aAAV,EAAyB;AACrBrB,IAAAA,MAAM,CAACsB,OAAP;AACH;;AACD9B,EAAAA,SAAS,CAAC4B,aAAV,CAAwBxB,KAAxB;AACA,SAAOI,MAAP;AACH","sourcesContent":["\"use strict\";\nimport { Indicator } from '../indicator/indicator';\nimport { LinkedList } from '../Utils/LinkedList';\nexport class WMA extends Indicator {\n    constructor(input) {\n        super(input);\n        var period = input.period;\n        var priceArray = input.values;\n        this.result = [];\n        this.generator = (function* () {\n            let data = new LinkedList();\n            let denominator = period * (period + 1) / 2;\n            while (true) {\n                if ((data.length) < period) {\n                    data.push(yield);\n                }\n                else {\n                    data.resetCursor();\n                    let result = 0;\n                    for (let i = 1; i <= period; i++) {\n                        result = result + (data.next() * i / (denominator));\n                    }\n                    var next = yield result;\n                    data.shift();\n                    data.push(next);\n                }\n            }\n        })();\n        this.generator.next();\n        priceArray.forEach((tick, index) => {\n            var result = this.generator.next(tick);\n            if (result.value != undefined) {\n                this.result.push(this.format(result.value));\n            }\n        });\n    }\n    //STEP 5. REMOVE GET RESULT FUNCTION\n    nextValue(price) {\n        var result = this.generator.next(price).value;\n        if (result != undefined)\n            return this.format(result);\n    }\n    ;\n}\nWMA.calculate = wma;\n;\nexport function wma(input) {\n    Indicator.reverseInputs(input);\n    var result = new WMA(input).result;\n    if (input.reversedInput) {\n        result.reverse();\n    }\n    Indicator.reverseInputs(input);\n    return result;\n}\n"]},"metadata":{},"sourceType":"module"}